- [1. Installation of QGIS](#1-installation-of-qgis)
- [2. Installation of R](#2-installation-of-r)
- [3. Installation of R Studio](#3-installation-of-r-studio)
- [4.Installation of Google Earth Pro](#4installation-of-google-earth-pro)
- [5. Installation of platforms for containerised applications](#5-installation-of-platforms-for-containerised-applications)
  * [5.1 Docker (use this for Linux)](#51-docker-use-this-for-linux-)
  * [5.2 Podman and Windows Subsystem for Linux 2 (use this for Windows)](#52-podman-and-windows-subsystem-for-linux-2-use-this-for-windows-)
    + [Troublehooting](#troublehooting)
- [6. Installation of FORCE](#6-installation-of-force)
- [7. Installation of CDSE downloader](#7-installation-of-cdse-downloader)



## 1. Installation of QGIS

Refer to the [instructions here][1].
<br><br>

## 2. Installation of R

Refer to the [instructions here][2].
<br><br>

## 3. Installation of R Studio

Refer to the [instructions here][3].
<br><br>

## 4.Installation of Google Earth Pro

Refer to the [instructions here][4] for Linux and [here][5] for Windows and Mac.
<br><br>

## 5. Installation of platforms for containerised applications

FORCE can be installed as a containerised application i.e. applications for which all its dependencies 
are contained within a container, including the application itself. This helps avoid the download of 
many dependencies individually. It's easy to use Docker in Linux system, especially Ubuntu and Podman 
in Windows according to my experience. But both can work in both operating systems (OS). You just need 
to make one of the platforms work with one of the OS.

<br>

### 5.1 Docker (use this for Linux)

Docker is a platform for running containerised applications. The installation process is as follows:

Step 1: Open the terminal: <br>
`Ctrl+Alt+T` <br>
Step 2: Type the following in the terminal: <br>
 `sudo snap install docker`<br>
Step 3: Type in the password upon the following prompt:
`[sudo] password for birdlab:` <br>
Soon after, you should get a message like this:
```
docker 28.1.1+1 from Canonical✓ installed`
```
<br>

### 5.2 Podman and Windows Subsystem for Linux 2 (use this for Windows)

Windows Subsystem for Linux 2 (WSLv2) is needed for running podman, a platform for containerised 
applications. WSL2 is used to virtually run Linux kernel within a Windows operating system. 

Install Podman in Windows by downloading and running the Installer (choose amd64 unless your 
system is x64) [from here][6].

After installing podman (podman-installer-windows-amd64 in my case), `podman machine init` 
command would prompt the automated installation of WSLv2 if not already installed as described in 
[its official documentation][7]. 

The way to install if WSLv2 is not installed, is to run the following in Windows PowerShell:  
`wsl.exe --install`<br>
(It will look something like `PS C:\Users\Administrator> wsl.exe --install` in the terminal)

The output will look like this:

```
Downloading: Windows Subsystem for Linux 2.5.7
Installing: Windows Subsystem for Linux 2.5.7
Windows Subsystem for Linux 2.5.7 has been installed.
Installing Windows optional component: VirtualMachinePlatform

Deployment Image Servicing and Management tool
Version: 10.0.26100.1150

Image Version: 10.0.26100.4351

Enabling feature(s)
[==========================100.0%==========================]
The operation completed successfully.
The requested operation is successful. Changes will not be effective until the system is rebooted.
Downloading: Ubuntu
Installing: Ubuntu
The operation could not be started because a required feature is not installed.
Error code: Wsl/InstallDistro/Service/RegisterDistro/CreateVm/HCS/HCS_E_SERVICE_NOT_AVAILABLE
```
In the final stage here, you may see an error as above. So, try another method to fix it.

#### Troublehooting

One method [suggested here][8] is to run the following in PowerShell:<br>
`bcdedit /set hypervisorlaunchtype Auto`<br>
Output:<br>
```
The operation completed successfully.
```

(For some reason   `“bcdedit /enum | findstr -i hypervisorlaunchtype”` didn’t show anything)


If the same error as before repeats, based on the [advice here][9], check the system info 
by running the following in PowerShell:

`Systeminfo.exe`

Output (omitting a lot of unimportant details):

```
Host Name:                     DESKTOP-JX7QIPO
OS Name:                       Microsoft Windows 11 Pro for Workstations
...
...
...
...
Hyper-V Requirements:          VM Monitor Mode Extensions: Yes
                               Virtualization Enabled In Firmware: Yes
                               Second Level Address Translation: Yes
                               Data Execution Prevention Available: Yes
```
All the Hyper-V requirements are already turned on.

If the following is run, you may get a strange message:<br>
`wsl --update`<br>

Output:
```
Checking for updates.
The most recent version of Windows Subsystem for Linux is already installed.
```
This should mean that WSL is already installed. But, it is understood that it's not when
running the following:
`wsl --list`

Output:
```
Windows Subsystem for Linux has no installed distributions.
You can resolve this by installing a distribution with the instructions below:

Use 'wsl.exe --list --online' to list available distributions
and 'wsl.exe --install <Distro>' to install.
```
 
Try this next:<br>
`wsl.exe --list --online`

Output:

```
The following is a list of valid distributions that can be installed.
Install using 'wsl.exe --install <Distro>'.

NAME                            FRIENDLY NAME
AlmaLinux-8                     AlmaLinux OS 8
AlmaLinux-9                     AlmaLinux OS 9
AlmaLinux-Kitten-10             AlmaLinux OS Kitten 10
AlmaLinux-10                    AlmaLinux OS 10
Debian                          Debian GNU/Linux
FedoraLinux-42                  Fedora Linux 42
SUSE-Linux-Enterprise-15-SP5    SUSE Linux Enterprise 15 SP5
SUSE-Linux-Enterprise-15-SP6    SUSE Linux Enterprise 15 SP6
Ubuntu                          Ubuntu
Ubuntu-24.04                    Ubuntu 24.04 LTS
archlinux                       Arch Linux
kali-linux                      Kali Linux Rolling
openSUSE-Tumbleweed             openSUSE Tumbleweed
openSUSE-Leap-15.6              openSUSE Leap 15.6
Ubuntu-18.04                    Ubuntu 18.04 LTS
Ubuntu-20.04                    Ubuntu 20.04 LTS
Ubuntu-22.04                    Ubuntu 22.04 LTS
OracleLinux_7_9                 Oracle Linux 7.9
OracleLinux_8_7                 Oracle Linux 8.7
OracleLinux_9_1                 Oracle Linux 9.1
```

It's safer to select Ubuntu (the latest version for less chances of bugs) due to its 
user-friendliness and more documentation compared to other distributions. But, if you're
already using other distros, go ahead and choose one that works for you.   

Run the following:<br>
`wsl.exe --install Ubuntu-24.04`<br>


Output:
```
Downloading: Ubuntu 24.04 LTS
Installing: Ubuntu 24.04 LTS
Distribution successfully installed. It can be launched via 'wsl.exe -d Ubuntu-24.04'
Launching Ubuntu-24.04...
Provisioning the new WSL instance Ubuntu-24.04
This might take a while...
Create a default Unix user account: gis
New password:
Retype new password:
passwd: password updated successfully
To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.

gis@DESKTOP-JO7QOPO:/mnt/c/Users/Administrator$
```

When running the `podman machine start`, it may still give the error <br>
`Error: podman-machine-default: VM does not exist`

Try this next:
Ensure that WSL2 is set as the default version.
`wsl --set-default-version 2`

Output:
```
For information on key differences with WSL 2 please visit https://aka.ms/wsl2
The operation completed successfully.
```
When running the `podman machine start`, it may still give the error <br>
`Error: podman-machine-default: VM does not exist`

Try this next: try to remove existing VM and attempt to initialize it again:

`podman machine rm`

Output:
```
Error: podman-machine-default: VM does not exist`
```

Try this next: Check podman info.

`podman info`

Output
```
OS: windows/amd64
provider: wsl
version: 5.5.1

Cannot connect to Podman. Please verify your connection to the Linux system using `podman 
system connection list`, or try `podman machine init` and `podman machine start` to manage a
new Linux VM
Error: unable to connect to Podman socket: Get "http://d/v5.5.1/libpod/_ping": dial unix 
/run/podman/podman.sock: connect: A socket operation encountered a dead network.
```

Try this next:

`podman machine init`

Output:

```
Looking up Podman Machine image at quay.io/podman/machine-os-wsl:5.5 to create VM
Getting image source signatures
Copying blob 478bd26ba4c0 done   |
Copying config 44136fa355 done   |
Writing manifest to image destination
478bd26ba4c096d2e72dfecb99d6b7586e4ac16a9e9b7be3278ce515c0b347fa
Extracting compressed file: podman-machine-default-amd64: done
Importing operating system into WSL (this may take a few minutes on a new WSL install)...
The operation completed successfully.
Configuring system...
Machine init complete
To start your machine run:

        podman machine start
```

It worked. So, the next step is the following:

`podman machine start` <br>

Output:
```
Starting machine "podman-machine-default"

This machine is currently configured in rootless mode. If your containers
require root permissions (e.g. ports < 1024), or if you run into compatibility
issues with non-podman clients, you can switch using the following command:

        podman machine set --rootful

API forwarding listening on: npipe:////./pipe/docker_engine

Docker API clients default to this address. You do not need to set DOCKER_HOST.
Machine "podman-machine-default" started successfully
```
<br>

## 6. Installation of FORCE

Using podman:

`podman pull davidfrantz/force`

Output:

```
Resolving "davidfrantz/force" using unqualified-search registries 
(/etc/containers/registries.conf.d/999-podman-machine.conf)
Trying to pull docker.io/davidfrantz/force:latest...
Getting image source signatures
Copying blob sha256:cab095b42bc2e247a6081204ce93d903288984eb21b3d283bc0a204d2f866742
Copying blob sha256:74503d5bde519d899ca34ba7d7d530cd158a057898af56afdc041c5464d1ae3e
Copying blob sha256:d9802f032d6798e2086607424bfe88cb8ec1d6f116e11cd99592dcaf261e9cd2
Copying blob sha256:539bf3e25aac839ec52002dbcdb8e6abddbf67fffc8b102d9554663cc4524273
Copying blob sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1
Copying blob sha256:395f37217d8811fc0c1c2ee6a5fe82817e35724bf29aabc7e3e0fcbd1f1402d7
Copying blob sha256:54a6370a588e0c700690840aa37f6af4ccbb224692b66636329731946ded2b74
Copying blob sha256:4f4fb700ef54461cfa02571ae0db9a0dc1e0cdb5577484a6d75e68dc38e8acc1
Copying config sha256:dc3e4ae4e11aff2fd347298d6ee73a7311dc6e76d6bb279404addd8c65f9e0da
Writing manifest to image destination
dc3e4ae4e11aff2fd347298d6ee73a7311dc6e76d6bb279404addd8c65f9e0da
```
Similarly you can use docker (more information on this can be found in FORCE's
[official documentation for docker use here][10]):

`sudo docker pull davidfrantz/force`

Output:

```
[sudo] password for birdlab: 
Using default tag: latest
latest: Pulling from davidfrantz/force
d9802f032d67: Pull complete 
395f37217d88: Pull complete 
74503d5bde51: Pull complete 
539bf3e25aac: Pull complete 
4f4fb700ef54: Pull complete 
cab095b42bc2: Pull complete 
54a6370a588e: Pull complete 
Digest: sha256:25866b7beaaa2abdba03028002139f309abd343790db1cb93c321894ffebf049
Status: Downloaded newer image for davidfrantz/force:latest
docker.io/davidfrantz/force:latest

<br>
```
## 7. Installation of CDSE downloader

*In Linux:*

`sudo docker pull vudongpham/cdse-s2:latest`

*In Windows:*

`podman pull vudongpham/cdse-s2:latest`

Documentation can be [found here][11]. 

  [1]: https://qgis.org/resources/installation-guide/
  [2]: https://cran.rstudio.com/
  [3]: https://posit.co/download/rstudio-desktop/
  [4]: https://www.addictivetips.com/ubuntu-linux-tips/google-earth-pro-on-linux/
  [5]: https://support.google.com/earth/answer/21955?hl=en#zippy=,install-earth-pro-on-a-mac,install-earth-pro-on-windows
  [6]: https://github.com/containers/podman/releases
  [7]: https://github.com/containers/podman/blob/main/docs/tutorials/podman-for-windows.md
  [8]: https://learn.microsoft.com/en-us/answers/questions/1336873/how-to-solve-wsl-service-createinstance-createvm-h
  [9]: https://learn.microsoft.com/en-us/windows-server/virtualization/hyper-v/system-requirements-for-hyper-v-on-windows?pivots=windows#:~:text=on%20Windows%20Server.-,General%20requirements,the%20processor%20must%20have%20SLAT
  [10]: https://force-eo.readthedocs.io/en/latest/setup/docker.html
  [11]: https://github.com/vudongpham/CDSE_Sentinel2_downloader
